
# Домашнее задание к занятию "3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---


## Важно!

Перед отправкой работы на проверку удаляйте неиспользуемые ресурсы.
Это важно для того, чтоб предупредить неконтролируемый расход средств, полученных в результате использования промокода.

Подробные рекомендации [здесь](https://github.com/netology-code/virt-homeworks/blob/virt-11/r/README.md)

---

## Задача 1

Сценарий выполения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

### Ответ
https://hub.docker.com/r/xillah/netology-05-virt-03-docker/tags

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- Высоконагруженное монолитное java веб-приложение; </br>
#### Ответ: Виртуальная машина
Т.к. приложение монолитное, скорее всего будет трудоемко и бессмысленно разбивать его на части по контейнерам -> не докер </br>
Использовать физический сервер также не имеет смысла, так как данное приложение не зависит от аппаратного обеспечения (будет работать на любом доступном серверном оборудовании) </br>
- Nodejs веб-приложение; </br>
#### Ответ: docker
Приложение не зависит от аппартного обеспечения, можно разбить на контейнеры, сделать несколько экземпляров и отказоустойчивую конфигурацию 
- Мобильное приложение c версиями для Android и iOS; </br>
#### Ответ: docker
Мобильные приложения можно разбить на микросервисы и поместить в контейнеры </br>
- Шина данных на базе Apache Kafka; </br>
#### Ответ: физическая машина (https://habr.com/ru/company/oleg-bunin/blog/663306/) </br>
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana; </br>
#### Ответ: docker
Можно разбить по контейнерам, 1 нода - 1 контейнер. На сайте есть иснтрукции (https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html), также не зависит от аппаратного обеспечения </br>
- Мониторинг-стек на базе Prometheus и Grafana; </br>
#### Ответ: docker
Можно разбить на контейнеры  </br>
- MongoDB, как основное хранилище данных для java-приложения; </br>
#### Ответ: физическая машина
Базы данных должы иметь максимально прямой доступ к памяти для ускорения работы с данными, поэтому прослойка между БД и аппартным обеспечением должна быть минимальной -> не ВМ и не docker  </br>
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry. </br>
#### Ответ: Виртуальная машина или физическая машина
Для репозитория потребуется хранилище 

## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;
- Добавьте еще один файл в папку ```/data``` на хостовой машине;
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

Контейнер с Centos
```
vagrant@server1:~$ docker run -d --name centos -v  /home/vagrant/data:/data centos:latest
```
Контейнер с Debian
```
vagrant@server1:~$ docker run -d --name debian -v  /home/vagrant/data:/data debian:latest
```
Демонстрация файлов:
```
vagrant@server1:~$ docker exec -it centos /bin/bash
[root@ace868476c61 /]# cd data
[root@ace868476c61 data]# ls
[root@ace868476c61 data]# echo test > test.txt
[root@ace868476c61 data]# ls
test.txt
[root@ace868476c61 data]# exit
exit
vagrant@server1:~$ ls
data  indexdz.html  nginxdz
vagrant@server1:~$ echo test2 > ./data/test2
vagrant@server1:~$ docker exec -it debian /bin/bash
root@8c196a2c508d:/# ls -la /data
total 16
drwxrwxr-x 2 1000 1000 4096 Jan 28 15:16 .
drwxr-xr-x 1 root root 4096 Jan 28 14:58 ..
-rw-r--r-- 1 root root    5 Jan 28 15:16 test.txt
-rw-rw-r-- 1 1000 1000    6 Jan 28 15:16 test2
root@8c196a2c508d:/# cat /data/*
test
test2
```


## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.


---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
